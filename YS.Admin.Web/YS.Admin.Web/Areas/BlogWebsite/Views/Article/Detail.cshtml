@using YS.Admin.Entity.BlogManage
@model BlogArticleEntity
@{
    ViewBag.Title = ViewBag.Site.WebName + Model?.Title;
}
@section css {
    <link rel="stylesheet" href="~/lib/BlogInfo/css/blog.css" />
    <style>
        .blog-dz {
            width: 20px;
            height: 20px;
            position: absolute;
            bottom: -100px; /*初始红心生成的高度*/
            left: 50%;
            margin-left: -10px;
        }

        .circle {
            width: 40px; /* 圆形的宽度 */
            height: 40px; /* 圆形的高度 */ 
            background-color:rgb(18,4,36);
            float: left;
            overflow: hidden;
            border-radius: 4px; /* 使元素成为圆形 */
            display: flex; /* 使用flex布局 */
            justify-content: center; /* 水平居中文本 */
            align-items: center; /* 垂直居中文本 */
            color: rgb(225,210,231); /* 文本颜色 */
            font-size: 16px; /* 文本大小 */
            font-family: Arial, sans-serif; /* 文本字体 */
        }
    </style>
}
<div class="doc-container" id="doc-container">
    <div class="container-fixed">
        <div class="col-content" style="width:100%">
            <div class="inner">
                <article class="article-list">
                    <input type="hidden" value="@Model?.ClassId" id="blogtypeid" />
                    <input type="hidden" id="articleId" value="@Model?.Id">
                    <input type="hidden" id="openComment" value="true">
                    <input type="hidden" id="coverImage" value="@Model?.ImgUrl">
                    <input type="hidden" id="description" value="@Model?.ZhaiYao">
                    <section class="article-item">
                        <aside class="title" style="line-height:1.5;">
                            <h4>@Model?.Title</h4>
                            <p class="fc-grey fs-14">
                                <small>
                                    作者：<a href="javascript:void(0)" target="_blank" class="fc-link">@Model?.Author</a>
                                </small>
                                <small class="ml10">浏览次数：<i class="readcount">@Model?.ReadNum</i></small>
                                <small class="ml10">更新于：<label>@Model?.BaseCreateTime</label> </small>
                                <small class="ml10">分类：<label>@Model?.ClassName</label> </small>
                                <small class="ml10">类型：<label>@Model?.TypeName</label> </small>
                            </p>
                        </aside>
                        <div class="time mt10" style="padding-bottom:0;">
                            <span class="day">@Model?.BaseCreateTime.Value.Day</span>
                            <span class="month fs-18">@Model?.BaseCreateTime.Value.Month<small class="fs-14">月</small></span>
                            <span class="year fs-18">@Model?.BaseCreateTime.Value.Year</span>
                        </div>
                        <div class="content artiledetail" style="border-bottom: 1px solid #e1e2e0; padding-bottom: 20px;">
                            @Html.Raw(Model?.Content)

                            <div id="aplayer" style="margin:5px 0"></div>
                            <h6>延伸阅读</h6>
                            <ol class="b-relation">
                                @foreach (var item in ViewBag.OtherList)
                                {
                                    <li class="f-toe"><a href="~/BlogWebsite/Article/Detail/@item.Id">@item.Title</a></li>
                                }
                            </ol>
                        </div>
                    
                        <fieldset class="layui-elem-field layui-field-title">
                            <legend>发表评论</legend>
                            <div class="layui-field-box">
                                <div class="leavemessage" style="text-align:initial">
                                    <form class="layui-form blog-editor" action="">
                                        <input type="hidden" name="articleid" id="articleid" value="@Model?.Id">
                                        <div class="layui-form-item">
                                            <textarea name="editorContent" lay-verify="content" id="remarkEditor" placeholder="请输入内容" class="layui-textarea layui-hide"></textarea>
                                        </div>
                                        <div class="layui-form-item">
                                            @if (ViewBag.Site.CommentStatus == "1")
                                            {
                                                <button class="layui-btn" lay-submit="formLeaveMessage" lay-filter="formLeaveMessage">提交留言</button>
                                            }
                                            else
                                            {
                                                <div style="text-align: center;">
                                                    <span>评论功能已被关闭了哟～</span>
                                                </div>
                                            }
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </fieldset>
                        <ul class="blog-comment" id="blog-comment" data-count="@ViewBag.Count" data-pagesize="@ViewBag.PageSize" data-pagecount="@ViewBag.PageCount" data-articleId="@Model?.Id">
                        </ul>
                    </section>
                </article>
            </div>
        </div>
    </div>
    <div id="qrcode" style="display:none;"></div>
</div>

@section js {
    <script src="~/lib/BlogInfo/js/pagecomment.js"></script>
    <script type="text/javascript">
        var $;
        layui.use(['jquery', 'layer'], function () {
            $ = layui.jquery,
                layer = layui.layer;
            var qrcode = new QRCode("qrcode", {
                text: location.href,
                width: 200,
                height: 200,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            }); 
        }); 
    </script>
}
